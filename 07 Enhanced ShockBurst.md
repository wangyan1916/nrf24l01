# 7 Enhanced ShockBurst

增强型 ShockBurst™ 是基于数据包的数据链路层。

它具有自动数据包组装和计时、自动确认和重新传输数据包的功能。

增强型 ShockBurst™ 可实现与低成本主机微控制器的超低功耗、高性能通信。

这些功能可显着提高双向和单向系统的电源效率，而不会增加主机控制器端的复杂性。

## 7.1 特性

增强型 ShockBurst™ 的主要特点是：

- 1 至 32 字节动态负载长度
- 自动数据包处理
- 自动数据包事务处理
  - 自动确认
  - 自动重传
- 用于 1:6 星形网络的 6 个数据管道 MultiCeiver™

## 7.2 增强型 ShockBurst™ 概述

增强型 ShockBurst™ 使用 ShockBurst™ 进行自动数据包处理和计时。

在传输过程中，ShockBurst™ 组装数据包并将数据包中的位计时到发送器中进行传输。

在接收过程中，ShockBurst™ 不断在解调信号中搜索有效地址。

- 当 ShockBurst™ 找到有效地址时，它会处理数据包的其余部分并通过 CRC 对其进行验证。
- 如果数据包有效，则有效负载将移至 RX FIFO 中。
- 高速位处理和定时由 ShockBurst™ 控制

增强型 ShockBurst™ 具有自动数据包事务处理功能，可实现可靠的双向数据链路。

增强型 ShockBurst™ 数据包事务是收发器之间的数据包交换，其中一个收发器是主接收器 (PRX)，另一个是主发送器 (PTX)。

增强型 ShockBurst™ 数据包事务始​​终由 PTX 的数据包传输发起，当 PTX 收到来自 PRX 的确认数据包（ACK 数据包）时事务完成。

自动数据包事务处理的工作原理如下：

- 用户通过将数据包从PTX发送到PRX来发起交易。 增强型 ShockBurst™ 自动将 PTX 设置为接收模式以等待 ack 数据包。
- 如果 PRX 收到数据包，Enhanced ShockBurst™ 会在返回接收模式之前自动组装并向 PTX 发送确认数据包（ACK 数据包）
- 如果 PTX 在设定时间内没有收到 ACK 数据包，Enhanced ShockBurst™ 将自动重传原始数据包，并将 PTX 设置为接收模式以等待 ACK 数据包

PRX 可以将用户数据附加到 ACK 数据包上，从而实现双向数据链路。增强型 ShockBurst™ 具有高度可配置性； 可以配置参数，例如最大重传次数以及从一次传输到下一次重传的延迟。 所有自动处理都是在没有 MCU 参与的情况下完成的。

[7.3 节](#73-增强型-shockburst-数据包格式)介绍了增强型 ShockBurst 数据包格式；

[7.4 节](#74-自动数据包处理)介绍了自动数据包处理；

[7.5 节](#75-自动数据包拆包处理)介绍了自动数据包事务处理；

[7.6 节](#76-增强型-shockburst-流程图)提供了 PTX 和 PRX 操作的流程图

## 7.3 增强型 ShockBurst 数据包格式

本章介绍了增强型 ShockBurst™ 数据包的格式。

增强型 ShockBurst™ 数据包包含前导码字段、地址字段、数据包控制字段、有效负载字段和 CRC 字段。

图 4 显示了 MSB 位于左侧的数据包格式。

![图4](./images/fig04.png)

### 7.3.1 前导码字段



## 7.4 自动数据包处理

## 7.5 自动数据包拆包处理

## 7.6 增强型 ShockBurst 流程图